create table duplication_tester select gridimage_id,grid_reference,realname,regexp_replace(title,' #\\d+$','') as title,count(*) as images,sum(title regexp ' #\\d+$') as nums from gridimage_search where grid_reference = 'TQ3980' group by user_id,realname,tags,comment,imagetaken,regexp_replace(title,' #\\d+$','') having images > 1 and nums >0;
select gi.gridimage_id,d.grid_reference,d.title,i.title from duplication_tester d inner join gridimage_search gi on (gi.grid_reference = d.grid_reference and gi.title like concat(d.title,'%') ) limit 10;
select gi.gridimage_id,d.grid_reference,d.title,gi.title from duplication_tester d inner join gridimage_search gi on (gi.grid_reference = d.grid_reference and gi.title like concat(d.title,'%') ) limit 10;
select gi.gridimage_id,md5sum(d.title),d.grid_reference,d.title,gi.title from duplication_tester d inner join gridimage_search gi on (gi.grid_reference = d.grid_reference and gi.title like concat(d.title,'%') ) limit 10;
select gi.gridimage_id,md5(d.title),d.grid_reference,d.title,gi.title from duplication_tester d inner join gridimage_search gi on (gi.grid_reference = d.grid_reference and gi.title like concat(d.title,'%') ) limit 10;
select gi.gridimage_id,md5(d.title),d.grid_reference,gi.title from duplication_tester d inner join gridimage_search gi on (gi.grid_reference = d.grid_reference and gi.title like concat(d.title,'%') ) limit 10;
select gi.gridimage_id,md5(d.title),d.grid_reference,gi.title from duplication_tester d inner join gridimage_search gi on (gi.grid_reference = d.grid_reference and gi.title like concat(d.title,'%') ) left join duplication_stat s on (s.gridimage_id = gi.gridimage_id) limit 10;
select gi.gridimage_id,md5(d.title),d.grid_reference,gi.title,serial,same_title from duplication_tester d inner join gridimage_search gi on (gi.grid_reference = d.grid_reference and gi.title like concat(d.title,'%') ) left join duplication_stat s on (s.gridimage_id = gi.gridimage_id) limit 10;
select gi.gridimage_id,md5(d.title),d.grid_reference,gi.title,serial,same_title from duplication_tester d inner join gridimage_search gi on (gi.grid_reference = d.grid_reference and gi.title like concat(d.title,'%') ) left join duplication_stat s on (s.gridimage_id = gi.gridimage_id);
update  duplication_tester d inner join gridimage_search gi on (gi.grid_reference = d.grid_reference and gi.title like concat(d.title,'%') ) inner join duplication_stat s on (s.gridimage_id = gi.gridimage_id) set serial = md5(d.title);
select gi.gridimage_id,md5(d.title),d.grid_reference,gi.title,serial,same_title from duplication_tester d inner join gridimage_search gi on (gi.grid_reference = d.grid_reference and gi.title like concat(d.title,'%') ) left join duplication_stat s on (s.gridimage_id = gi.gridimage_id);
select gi.gridimage_id,md5(d.title),d.grid_reference,gi.title,serial,same_title from duplication_tester d inner join gridimage_search gi on (gi.grid_reference = d.grid_reference and gi.title like concat(d.title,'%') ) left join duplication_stat s on (s.gridimage_id = gi.gridimage_id) group by gridimage_id;
update  duplication_tester d inner join gridimage_search gi on (gi.grid_reference = d.grid_reference and gi.title like concat(d.title,'%') ) inner join duplication_stat s on (s.gridimage_id = gi.gridimage_id) set serial = md5(d.title),same_serial = nums;
select gi.gridimage_id,md5(d.title),d.grid_reference,gi.title,serial,same_serial from duplication_tester d inner join gridimage_search gi on (gi.grid_reference = d.grid_reference and gi.title like concat(d.title,'%') ) left join duplication_stat s on (s.gridimage_id = gi.gridimage_id) group by gridimage_id;
